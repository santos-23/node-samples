<!DOCTYPE html>
<html>
<head>
  <title>Image Upload with jQuery DataTables</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
  <style>
    #formID{
      display: grid;
      margin-left: 300px;
      align-items: center;
      text-align: center;
      width: 600px;
    }
    input{
      margin-top: 10px;
    }
    table {
      width: 100%;
    }
    img {
      max-width: 100px;
      max-height: 100px;
    }
  </style>
</head>
<body>
  <div id="formID">
  <form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="imageFile" id="imageFile" accept="image/*"><br>
    <label for="name">EmpName:</label>
    <input type="text" name="name" id="name">
    <label for="id">EmpID:</label>
    <input type="number" name="id" id="id"><br>
    <label for="age">Age:</label>
    <input type="number" name="age" id="age">
    <label for="position">Position:</label>
    <input type="text" name="position" id="position"><br>
    <label for="phone">Phone:</label>
    <input type="text" name="phone" id="phone">
    <label for="address">Address:</label>
    <input type="text" name="address" id="address"><br>
    <label for="skills">Skills:</label>
    <input type="text" name="skills" id="skills">
    <label for="qualification">Qualification:</label>
    <input type="text" name="qualification" id="qualification"><br>
    

    <input type="submit" value="Upload Image">
  </form>
</div>

  <table id="imageTable">
    <thead>
      <tr>
        <th>Profile</th>
        <th>Employee Name</th>
        <th>Employee ID</th>
        <th>Age</th>
        <th>Position</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Skills</th>
        <th>Qualification</th>
        <th>Joining Date</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
    <tfoot>
      <tr>
        <th>Profile</th>
        <th>Employee Name</th>
        <th>Employee ID</th>
        <th>Age</th>
        <th>Position</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Skills</th>
        <th>Qualification</th>
        <th>Joining Date</th>
      </tr>
    </tfoot>
  </table>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <script src="./script.js">
    // function getImageUrl(filename) {
    //   return '/multi_array/uploads/' + filename;
    // }
    // $(document).ready(function() {
    //   const dataTable = $('#imageTable').DataTable({
    //     "paging":true,
    //     // "scrollY":"300px",
    //     columns: [
    //     { 
    //       data: 'imageUrl',
    //       render: function(data, type, row) {
    //         return '<img src="' + getImageUrl(data) + '" alt="' + row.name + '">';
    //         console.log(data)
    //       }
    //     },
    //     { data: 'name' },
    //     { data: 'id'},
    //     { data: 'age' },
    //     { data: 'position'},
    //     { data: 'phone' },
    //     { data: 'address' },
    //     { data: 'skills' },
    //     { data: 'qualification' },
    //     { data: 'uploadedAt' }
    //   ]
    //   });

    //   $('#uploadForm').on('submit', function(event) {
    //     event.preventDefault();

    //     const formData = new FormData();
    //     const imageFile = $('#imageFile')[0].files[0];
    //     const name = $('#name').val();
    //     const id = $('#id').val();
    //     const age = $('#age').val();
    //     const position = $('#position').val();
    //     const phone = $('#phone').val();
    //     const address = $('#address').val();
    //     const skills = $('#skills').val();
    //     const qualification = $('#qualification').val();
        

    //     if (!imageFile || !name) {
    //       alert('Please select an image and enter a name to upload.');
    //       return;
    //     }

    //     formData.append('image', imageFile);
    //     formData.append('name', name);
    //     formData.append('id', id);
    //     formData.append('age', age);
    //     formData.append('position', position);
    //     formData.append('phone', phone);
    //     formData.append('address', address);
    //     formData.append('skills', skills);
    //     formData.append('qualification', qualification);
        

    //     $.ajax({
    //       url: '/api/upload',
    //       type: 'POST',
    //       data: formData,
    //       contentType: false,
    //       processData: false,
    //       success: function(data) {
    //         console.log(data);
    //         fetchImageData();
    //       },
    //       error: function(error) {
    //         console.error('Error uploading image:', error);
    //       }
    //     });
    //   });

    //   function fetchImageData() {
    //     $.ajax({
    //       url: '/api/images',
    //       type: 'GET',
    //       success: function(data) {
    //         dataTable.clear();
    //         dataTable.rows.add(data);
    //         dataTable.draw();
    //       },
    //       error: function(error) {
    //         console.error('Error fetching image data:', error);
    //       }
    //     });
    //   }

    //   fetchImageData();
    // });
  </script>
</body>
</html>
